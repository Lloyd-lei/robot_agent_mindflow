# ğŸš€ å¿«é€Ÿå¼€å§‹

## 5 åˆ†é’Ÿä¸Šæ‰‹ AI Agent + TTS

---

## ç¬¬ 1 æ­¥ï¼šå…‹éš†é¡¹ç›®

```bash
git clone https://github.com/Lloyd-lei/robot_agent_mindflow.git
cd robot_agent_mindflow
```

---

## ç¬¬ 2 æ­¥ï¼šé…ç½®ç¯å¢ƒ

### 2.1 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
python -m venv venv
source venv/bin/activate  # Mac/Linux
# æˆ– venv\Scripts\activate  # Windows
```

### 2.2 å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

å®‰è£…åŒ…æ‹¬ï¼š

- âœ… OpenAI SDK
- âœ… LangChain
- âœ… Edge TTSï¼ˆè¯­éŸ³åˆæˆï¼‰
- âœ… pygameï¼ˆéŸ³é¢‘æ’­æ”¾ï¼‰

---

## ç¬¬ 3 æ­¥ï¼šé…ç½® API å¯†é’¥

### 3.1 å¤åˆ¶é…ç½®æ¨¡æ¿

```bash
cp .env.example .env
```

### 3.2 ç¼–è¾‘ `.env` æ–‡ä»¶

```bash
# ä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨
nano .env
# æˆ–
vim .env
# æˆ–
code .env  # VS Code
```

### 3.3 å¡«å…¥ä½ çš„ OpenAI API å¯†é’¥

```env
# OpenAI API é…ç½®
OPENAI_API_KEY=sk-proj-ä½ çš„å¯†é’¥

# LLM æ¨¡å‹é…ç½®
LLM_MODEL=gpt-4-turbo-preview
TEMPERATURE=0
```

ğŸ’¡ **æ²¡æœ‰ API å¯†é’¥ï¼Ÿ**

1. è®¿é—®ï¼šhttps://platform.openai.com/api-keys
2. åˆ›å»ºæ–°çš„ API å¯†é’¥
3. å¤åˆ¶å¹¶ç²˜è´´åˆ° `.env` æ–‡ä»¶

---

## ç¬¬ 4 æ­¥ï¼šæµ‹è¯• TTS

```bash
python test_tts_integration.py
```

**æœŸæœ›è¾“å‡ºï¼š**

```
ğŸ§ª æµ‹è¯• Edge TTS é›†æˆ
1ï¸âƒ£  åˆ›å»º Edge TTS å®ä¾‹...
   âœ… æˆåŠŸï¼

2ï¸âƒ£  åˆæˆæµ‹è¯•æ–‡æœ¬...
   âœ… åˆæˆæˆåŠŸï¼éŸ³é¢‘å¤§å°: 21,888 å­—èŠ‚

4ï¸âƒ£  ä½¿ç”¨ pygame æ’­æ”¾éŸ³é¢‘...
   ğŸ”Š æ­£åœ¨æ’­æ”¾...
   âœ… æ’­æ”¾å®Œæˆï¼
```

å¦‚æœå¬åˆ°"ä½ å¥½ï¼Œè¿™æ˜¯ Edge TTS é›†æˆæµ‹è¯•"ï¼Œè¯´æ˜ TTS å·¥ä½œæ­£å¸¸ï¼âœ…

---

## ç¬¬ 5 æ­¥ï¼šè¿è¡Œ AI Agent

```bash
python demo_hybrid.py
```

**æœŸæœ›è¾“å‡ºï¼š**

```
ğŸš€ æ··åˆæ¶æ„AI Agent - æ€§èƒ½ä¼˜åŒ–ç‰ˆ
===============================================
âœ¨ æ ¸å¿ƒä¼˜åŠ¿ï¼š
  ğŸ“Š OpenAIåŸç”ŸAPI - 100%å¯é çš„å·¥å…·è°ƒç”¨
  ğŸ› ï¸  LangChainå·¥å…·æ±  - 17ä¸ªå¼ºå¤§å·¥å…·
  âš¡ KV Cacheä¼˜åŒ– - å¤šè½®å¯¹è¯é€Ÿåº¦æå‡3-5å€
  ğŸ’° Prompt Caching - æˆæœ¬èŠ‚çœ50%

â³ æ­£åœ¨åˆå§‹åŒ–æ··åˆæ¶æ„Agent...
ğŸµ ä½¿ç”¨ Edge TTSï¼ˆæ™“æ™“è¯­éŸ³ï¼‰...
âœ… æ··åˆæ¶æ„Agentåˆå§‹åŒ–æˆåŠŸ
   TTSä¼˜åŒ–: å¯ç”¨
   è¯­éŸ³æ¨¡å¼: å¯ç”¨

ğŸ’¬ æ‚¨:
```

---

## ğŸ¯ è¯•è¯•è¿™äº›å‘½ä»¤

### åŸºç¡€åŠŸèƒ½

```
ç°åœ¨å‡ ç‚¹äº†ï¼Ÿ
```

```
è®¡ç®— sqrt(2) ä¿ç•™ 3 ä½å°æ•°
```

```
ç»Ÿè®¡'äººå·¥æ™ºèƒ½'æœ‰å¤šå°‘å­—ï¼Ÿ
```

### é«˜çº§åŠŸèƒ½

```
å›¾ä¹¦é¦†æœ‰å…³äº Python çš„ä¹¦å—ï¼Ÿ
```

```
æ˜å¤©ä¸Šåˆ10ç‚¹æé†’æˆ‘å¼€ä¼š
```

```
æœç´¢æœ€æ–°çš„ AI æ–°é—»
```

### å‰å°æ¥å¾…åŠŸèƒ½

```
å¸®æˆ‘ç™»è®°è®¿å®¢ä¿¡æ¯
```

```
æŸ¥è¯¢ä¼šè®®å®¤ä½¿ç”¨æƒ…å†µ
```

```
å‘Šè¯‰æˆ‘æ´—æ‰‹é—´æ€ä¹ˆèµ°
```

### ç»“æŸå¯¹è¯

```
å†è§
```

Agent ä¼šè‡ªåŠ¨æ£€æµ‹ç»“æŸæ„å›¾å¹¶ä¼˜é›…é€€å‡ºï¼âœ¨

---

## ğŸ“Š æŸ¥çœ‹ç³»ç»Ÿç»Ÿè®¡

åœ¨å¯¹è¯ä¸­è¾“å…¥ï¼š

```
stats
```

ä¼šæ˜¾ç¤º KV Cache ç»Ÿè®¡ä¿¡æ¯ï¼š

```
ğŸ“Š KV Cache ç»Ÿè®¡ä¿¡æ¯
å¯¹è¯è½®æ¬¡: 5
æ€»æ¶ˆæ¯æ•°: 12
ç¼“å­˜tokens: ~2,500 tokens
ğŸ’° é¢„ä¼°èŠ‚çœ: ~1,250 tokens æˆæœ¬
```

---

## ğŸµ TTS æ¼”ç¤ºæ•ˆæœ

å½“ä½ æé—®æ—¶ï¼ŒAgent ä¼šï¼š

1. ğŸ¤” **æ˜¾ç¤ºæ€è€ƒçŠ¶æ€**

   ```
   ğŸ¤” Agentæ­£åœ¨æ€è€ƒ...
   ```

2. ğŸ“Š **å±•ç¤ºæ¨ç†è¿‡ç¨‹**

   ```
   âœ… æ¨¡å‹å†³ç­–:
      â†’ é€‰æ‹©å·¥å…·: calculator
   ğŸ“¥ æ¨¡å‹å†³å®šçš„å‚æ•°:
      { "expression": "sqrt(2)" }
   ğŸ“¤ å·¥å…·è¿”å›ç»“æœ:
      1.414
   ```

3. ğŸ“ **æ˜¾ç¤º LLM åŸå§‹è¾“å‡º**

   ```
   è®¡ç®—ç»“æœæ˜¯ï¼š1.414
   ```

4. ğŸ—£ï¸ **æ˜¾ç¤º TTS ä¼˜åŒ–ç»“æ„**

   ```
   [Chunk 0]
     æ–‡æœ¬: è®¡ç®—ç»“æœæ˜¯ï¼š1.
     é•¿åº¦: 8 å­—ç¬¦
     åœé¡¿: 800ms

   [Chunk 1]
     æ–‡æœ¬: 414ã€‚
     é•¿åº¦: 4 å­—ç¬¦
     åœé¡¿: 800ms
   ```

5. ğŸ”Š **æ’­æ”¾è¯­éŸ³**ï¼ˆå¦‚æœä½ æœ‰æ‰¬å£°å™¨ï¼‰

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤          | åŠŸèƒ½         |
| ------------- | ------------ |
| `help`        | æŸ¥çœ‹å¸®åŠ©     |
| `stats`       | æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡ |
| `clear`       | æ¸…é™¤å¯¹è¯å†å² |
| `q` æˆ– `quit` | é€€å‡ºç¨‹åº     |

---

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šAPI å¯†é’¥é”™è¯¯

```
âŒ è¯·åœ¨ .env æ–‡ä»¶ä¸­è®¾ç½® OPENAI_API_KEY ç¯å¢ƒå˜é‡
```

**è§£å†³æ–¹æ³•ï¼š**

1. æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
2. ç¡®è®¤ API å¯†é’¥æ­£ç¡®
3. ç¡®ä¿æ²¡æœ‰å¤šä½™çš„ç©ºæ ¼æˆ–å¼•å·

---

### é—®é¢˜ 2ï¼šTTS æ’­æ”¾æ— å£°éŸ³

**å¯èƒ½åŸå› ï¼š**

- éŸ³é‡è¢«é™éŸ³
- æ‰¬å£°å™¨æœªè¿æ¥
- pygame éŸ³é¢‘åˆå§‹åŒ–å¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**

1. æ£€æŸ¥ç³»ç»ŸéŸ³é‡
2. å°è¯•æ’­æ”¾å…¶ä»–éŸ³é¢‘
3. é‡æ–°å®‰è£… pygameï¼š`pip install --upgrade pygame`

---

### é—®é¢˜ 3ï¼šç½‘ç»œè¿æ¥é”™è¯¯

```
âŒ Error: Connection timeout
```

**è§£å†³æ–¹æ³•ï¼š**

- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- TTS éœ€è¦è®¿é—®å¾®è½¯æœåŠ¡å™¨
- OpenAI API éœ€è¦å›½é™…ç½‘ç»œ

---

### é—®é¢˜ 4ï¼šä¾èµ–å†²çª

```
ERROR: pip's dependency resolver...
```

**è§£å†³æ–¹æ³•ï¼š**

```bash
# ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# æˆ–å¼ºåˆ¶é‡æ–°å®‰è£…
pip install --force-reinstall -r requirements.txt
```

---

## ğŸ“š è¿›é˜¶é˜…è¯»

### äº†è§£æ›´å¤šåŠŸèƒ½

- ğŸ“– `TTSé…ç½®è¯´æ˜.md` - TTS è¯¦ç»†é…ç½®
- ğŸ“– `é¡¹ç›®ç»“æ„è¯´æ˜.md` - é¡¹ç›®æ¶æ„
- ğŸ“– `æ··åˆæ¶æ„ä¼˜åŒ–æŠ¥å‘Š.md` - æ€§èƒ½ä¼˜åŒ–
- ğŸ“– `å‰å°æ¥å¾…Agentè¯´æ˜.md` - ä¸šåŠ¡åœºæ™¯

### è‡ªå®šä¹‰å¼€å‘

- ğŸ”§ `tools.py` - æ·»åŠ è‡ªå®šä¹‰å·¥å…·
- ğŸ”§ `tts_interface.py` - é›†æˆå…¶ä»– TTS
- ğŸ”§ `agent_hybrid.py` - ä¿®æ”¹ Agent è¡Œä¸º

### æµ‹è¯•è„šæœ¬

- ğŸ§ª `test_tts_integration.py` - TTS åŠŸèƒ½æµ‹è¯•
- ğŸ§ª `test_hybrid_vs_langchain.py` - æ€§èƒ½å¯¹æ¯”

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### 1ï¸âƒ£ åˆ‡æ¢ TTS è¯­éŸ³

```python
from agent_hybrid import HybridReasoningAgent
from tts_interface import TTSFactory, TTSProvider

# ä½¿ç”¨ç”·å£°
tts = TTSFactory.create_tts(
    provider=TTSProvider.EDGE,
    voice="zh-CN-YunxiNeural",  # äº‘å¸Œç”·å£°
    rate="+10%"                 # åŠ å¿«è¯­é€Ÿ
)

agent = HybridReasoningAgent(
    enable_tts=True,
    tts_engine=tts
)
```

### 2ï¸âƒ£ æ·»åŠ è‡ªå®šä¹‰å·¥å…·

ç¼–è¾‘ `tools.py`ï¼š

```python
from langchain.tools import BaseTool

class MyCustomTool(BaseTool):
    name = "my_tool"
    description = "æˆ‘çš„è‡ªå®šä¹‰å·¥å…·"

    def _run(self, query: str) -> str:
        # ä½ çš„é€»è¾‘
        return "ç»“æœ"
```

ç„¶ååœ¨ `agent_hybrid.py` ä¸­æ³¨å†Œï¼š

```python
from tools import MyCustomTool

def _init_langchain_tools(self):
    return [
        # ... å…¶ä»–å·¥å…·
        MyCustomTool()
    ]
```

### 3ï¸âƒ£ éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

è€ƒè™‘åˆ‡æ¢åˆ° Azure TTSï¼š

```python
tts = TTSFactory.create_tts(
    provider=TTSProvider.AZURE,
    api_key=os.getenv("AZURE_SPEECH_KEY"),
    region="eastasia"
)
```

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

- ğŸ“§ æäº¤ Issueï¼šhttps://github.com/Lloyd-lei/robot_agent_mindflow/issues
- ğŸ“– æŸ¥çœ‹æ–‡æ¡£ï¼šä»“åº“ä¸­çš„ `.md` æ–‡ä»¶
- ğŸ” æœç´¢ä»£ç ï¼šæ‰€æœ‰ä»£ç éƒ½æœ‰è¯¦ç»†æ³¨é‡Š

---

## âœ… å¿«é€Ÿæ£€æŸ¥æ¸…å•

å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼Œç¡®ä¿ä¸€åˆ‡æ­£å¸¸ï¼š

- [ ] âœ… å…‹éš†é¡¹ç›®
- [ ] âœ… å®‰è£…ä¾èµ–ï¼ˆ`pip install -r requirements.txt`ï¼‰
- [ ] âœ… é…ç½® API å¯†é’¥ï¼ˆ`.env` æ–‡ä»¶ï¼‰
- [ ] âœ… æµ‹è¯• TTSï¼ˆ`python test_tts_integration.py`ï¼‰
- [ ] âœ… è¿è¡Œ Agentï¼ˆ`python demo_hybrid.py`ï¼‰
- [ ] âœ… å°è¯•å¯¹è¯ï¼ˆ"ç°åœ¨å‡ ç‚¹äº†ï¼Ÿ"ï¼‰
- [ ] âœ… å¬åˆ°è¯­éŸ³å›å¤

å…¨éƒ¨å®Œæˆï¼ŸğŸ‰ **æ­å–œï¼ä½ å·²ç»æˆåŠŸè¿è¡Œäº† AI Agent + TTSï¼**

---

**äº«å—ä½ çš„ AI è¯­éŸ³åŠ©æ‰‹å§ï¼** ğŸš€ğŸ‰
